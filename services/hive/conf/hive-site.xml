<configuration>
    <!-- Set HDFS metastore URI -->
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://namenode:8020</value>
    </property>

    <!-- Configurations for HIVE metastore -->
    <!-- hive.metastore.warehouse.dir is deprecated since Spark 2.0.0 -->
    <property>
        <name>hive.metastore.warehouse.dir</name>
        <value>hdfs://namenode:8020/user/hive/warehouse</value>
    </property>
    <property>
        <name>spark.sql.warehouse.dir</name>
        <value>hdfs://namenode:8020/user/hive/warehouse</value>
    </property>

    <!-- Set HDFS location for Hive scratch directory -->
    <property>
        <name>hive.exec.scratchdir</name>
        <value>/tmp/hive</value>
        <description>Scratch space for Hive jobs</description>
    </property>

    <!-- Spark configurations -->
    <property>
        <name>spark.sql.catalogImplementation</name>
        <value>hive</value>
        <description></description>
    </property>

    <!-- Set HDFS location for Hive user home directory -->
    <property>
        <name>hive.metastore.user.home.dir</name>
        <value>/user/hive</value>
        <description>Location in HDFS for user home directories</description>
    </property>

    <!-- HIVE metastore configurations -->
    <property> 
      <name>hive.metastore.uris</name> 
      <value>thrift://hive-metastore:9083</value>
      <description>IP address (or fully-qualified domain name) and port of the metastore host</description> 
    </property> 
    <property> 
      <name>hive.metastore.schema.verification</name> 
      <value>true</value> 
    </property>    
    <property> 
      <name>metastore.create.as.acid</name> 
      <value>true</value> 
    </property> 
    <property>
        <name>datanucleus.autoStartMechanism</name>
        <value>SchemaTable</value>
    </property>

    <!-- HIVE metastore MYSQL connector configurations -->
    <property> 
      <name>javax.jdo.option.ConnectionDriverName</name> 
      <value>com.mysql.cj.jdbc.Driver</value> 
    </property> 
    <property> 
      <name>javax.jdo.option.ConnectionUserName</name> 
      <value>root</value> 
    </property> 
    <property> 
      <name>javax.jdo.option.ConnectionPassword</name> 
      <value>root</value> 
    </property> 
    <property> 
      <name>javax.jdo.option.ConnectionURL</name> 
      <value>jdbc:mysql://mysql:3306/hive_metastore?enabledTLSProtocols=TLSv1.2</value> 
      <description>The JDBC URL for the MySQL Hive Metastore database.</description> 
    </property>
<!-- createDatabaseIfNotExist=true&amp; -->

    <!-- Iceberg Integration -->
    <property>
        <name>iceberg.engine.hive.enabled</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.vectorized.execution.enabled</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.execution.engine</name>
        <value>spark</value>
    </property>

    <property>
       <name>hive.server2.authentication</name>
       <value>NONE</value>
    </property>

    <property>
      <name>hive.security.authorization.manager</name>
      <value>org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizerFactory</value>
    </property>
    <property>
      <name>hive.security.authenticator.manager</name>
      <value>org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator</value>
    </property>
    <property>
      <name>ranger.plugin.hive.service.name</name>
      <value>hive</value>
    </property>
    <property>
      <name>ranger.plugin.hive.policy.rest.url</name>
      <value>http://ranger-admin:6080</value>
    </property>
    <property>
      <name>ranger.plugin.hive.policy.rest.username</name>
      <value>admin</value>
    </property>
    <property>
      <name>ranger.plugin.hive.policy.rest.password</name>
      <value>rangeradmin1</value>
    </property>
    <property>
      <name>hive.server2.enable.doAs</name>
      <value>false</value>
    </property>
    <property>
      <name>xasecure.audit.destination.elasticsearch</name>
      <value>true</value>
    </property>
    <property>
      <name>xasecure.audit.elasticsearch.uris</name>
      <value>ranger-es:9200</value>
    </property>
    <property>
      <name>xasecure.audit.elasticsearch.user</name>
      <value>elasticsearch</value>
    </property>
    <property>
      <name>xasecure.audit.elasticsearch.password</name>
      <value>elasticsearch</value>
    </property>

</configuration>